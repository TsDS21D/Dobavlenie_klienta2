/*
calculator/static/calculator/css/sections/client.css
ОБНОВЛЕНО: Убрано "скакание" шрифтов при переключении между просчётами
КРИТИЧЕСКОЕ ИСПРАВЛЕНИЕ:
1. Убрано свойство font-style из CSS (больше нет курсива)
2. Только цвет меняется при отсутствии клиента
3. Шрифт всегда остаётся прямым (normal), не скачет
*/

/* ===== 1. ОСНОВНЫЕ СТИЛИ СЕКЦИИ ===== */
#client-section {
    border-left: 4px solid #3498db;          /* Синяя левая граница для визуального выделения секции */
    transition: all 0.3s ease;               /* Плавные переходы для анимации сворачивания */
}

/* ===== 2. ЗАГОЛОВОК СЕКЦИИ ===== */
#client-section .section-header {
    border-bottom-color: #3498db;            /* Синяя нижняя граница заголовка */
    background: linear-gradient(to right, #f8f9fa, #e3f2fd); /* Легкий градиентный фон */
    display: flex;                           /* Flexbox для выравнивания элементов */
    justify-content: space-between;          /* Распределение пространства между элементами */
    align-items: center;                     /* Вертикальное центрирование элементов */
    min-height: 40px;                        /* Минимальная высота для стабильности */
    padding: 10px 15px;                      /* Внутренние отступы для комфортного клика */
}

/* Стили для текста заголовка */
#client-section .section-header h2 {
    color: #2c3e50;                         /* Темно-синий цвет текста */
    font-weight: 600;                       /* Полужирное начертание для акцента */
    display: flex;                          /* Flexbox для выравнивания элементов внутри h2 */
    align-items: center;                    /* Вертикальное центрирование элементов */
    gap: 8px;                               /* Расстояние между элементами */
    margin: 0;                              /* Убираем стандартные отступы браузера */
    flex-grow: 1;                           /* Занимает всё доступное пространство */
    font-size: 1.2rem;                      /* Оптимальный размер шрифта для заголовка */
}

/* Иконка в заголовке */
#client-section .section-header i {
    color: #3498db;                         /* Синий цвет иконки в заголовке */
    font-size: 1.1rem;                      /* Немного увеличенная иконка */
}

/* ===== 3. БЕЙДЖ С НОМЕРОМ ПРОСЧЁТА ===== */
#selected-proschet-badge {
    background-color: #3498db;              /* Синий фон бейджа */
    color: white;                           /* Белый текст для контраста */
    font-size: 0.8em;                       /* Уменьшенный размер шрифта */
    padding: 3px 10px;                      /* Внутренние отступы для хорошей читаемости */
    border-radius: 12px;                    /* Скругленные углы для современного вида */
    margin-left: 10px;                      /* Отступ слева от текста заголовка */
    vertical-align: middle;                 /* Вертикальное выравнивание по центру */
    font-weight: 500;                       /* Средняя толщина шрифта */
    transition: opacity 0.3s ease;          /* Плавное появление/исчезновение */
}

/* ===== 4. КОНТЕЙНЕР ДЛЯ КНОПОК В ЗАГОЛОВКЕ ===== */
#client-section .header-buttons {
    display: flex;                          /* Flexbox для горизонтального расположения кнопок */
    align-items: center;                    /* Вертикальное центрирование кнопок */
    gap: 6px;                               /* Расстояние между кнопками */
    flex-shrink: 0;                         /* Запрещаем сжатие контейнера */
}

/* ===== 5. КНОПКА СВОРАЧИВАНИЯ СЕКЦИИ ===== */
#client-section .btn-collapse-section {
    min-width: 24px;                        /* Минимальная ширина для удобного клика */
    min-height: 24px;                       /* Минимальная высота для удобного клика */
    display: flex;                          /* Flexbox для центрирования иконки */
    align-items: center;                    /* Вертикальное центрирование иконки */
    justify-content: center;                /* Горизонтальное центрирование иконки */
    margin: 0;                              /* Убираем внешние отступы */
    padding: 6px;                           /* Внутренние отступы вокруг иконки */
    background: #f5f5f5;                    /* Светло-серый фон кнопки */
    border: 1px solid #ddd;                 /* Светло-серая рамка для визуального выделения */
    border-radius: 6px;                     /* Скругленные углы для современного вида */
    cursor: pointer;                        /* Курсор "указатель" при наведении */
    transition: all 0.2s ease;              /* Плавные переходы для всех свойств */
}

/* Эффект при наведении на кнопку сворачивания */
#client-section .btn-collapse-section:hover {
    background: #e0e0e0;                    /* Более темный серый фон при наведении */
    transform: scale(1.05);                 /* Легкое увеличение кнопки на 5% */
    border-color: #3498db;                  /* Синяя рамка при наведении */
}

/* Эффект при нажатии на кнопку сворачивания */
#client-section .btn-collapse-section:active {
    transform: scale(0.98);                 /* Легкое уменьшение кнопки при нажатии */
    background: #d0d0d0;                    /* Еще более темный серый фон при активном состоянии */
}

/* Иконка внутри кнопки сворачивания */
#client-section .btn-collapse-section i {
    font-size: 14px;                        /* Оптимальный размер иконки */
    color: #555;                            /* Темно-серый цвет иконки */
    line-height: 1;                         /* Нормализуем межстрочный интервал */
    transition: transform 0.3s ease;        /* Плавная анимация поворота иконки */
}

/* Анимация иконки при сворачивании секции */
#client-section.collapsed .btn-collapse-section i {
    transform: rotate(-90deg);              /* Поворот иконки на -90 градусов при свернутой секции */
    transform-origin: center;               /* Вращение вокруг центра иконки */
}

/* ===== 6. ОСНОВНОЕ ТЕЛО СЕКЦИИ ===== */
#client-section .section-body {
    padding: 20px 15px;                     /* Внутренние отступы для контента */
    background-color: #ffffff;              /* Белый фон для контента */
    transition: all 0.3s ease;              /* Плавная анимация при сворачивании */
}

/* Сообщение "Выберите просчёт" */
#no-proschet-selected {
    text-align: center;                     /* Центрирование текста и иконки */
    padding: 30px 20px;                     /* Внутренние отступы для пространства */
    color: #7f8c8d;                         /* Серый цвет для неактивного состояния */
}

#no-proschet-selected i {
    margin-bottom: 15px;                    /* Отступ снизу от иконки */
    color: #bdc3c7;                         /* Светло-серый цвет иконки */
}

#no-proschet-selected h3 {
    margin-bottom: 10px;                    /* Отступ снизу от заголовка */
    font-weight: 500;                       /* Средняя толщина шрифта */
}

#no-proschet-selected p {
    font-size: 0.95em;                      /* Немного уменьшенный размер шрифта */
    max-width: 300px;                       /* Ограничение ширины для лучшей читаемости */
    margin: 0 auto;                         /* Центрирование по горизонтали */
}

/* ===== 7. КАРТОЧКА ТЕКУЩЕГО КЛИЕНТА ===== */
/* КРИТИЧЕСКОЕ ИСПРАВЛЕНИЕ: Убраны все !important, используются правильные селекторы */
.current-client-card {
    background-color: #f8f9fa;              /* Светло-серый фон карточки */
    border: 1px solid #dee2e6;              /* Светло-серая рамка */
    border-radius: 8px;                     /* Скругленные углы для современного вида */
    padding: 20px;                          /* Внутренние отступы для пространства */
    margin-bottom: 0;                       /* Убираем нижний отступ, так как это единственный элемент */
    box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* Легкая тень для глубины */
    display: block;                         /* Гарантируем отображение как блочного элемента */
    visibility: visible;                    /* Гарантируем видимость */
    opacity: 1;                             /* Гарантируем полную непрозрачность */
    transition: all 0.3s ease;              /* Плавные переходы для анимаций */
}

/* Заголовок карточки клиента */
.client-card-header {
    display: flex;                          /* Flexbox для выравнивания элементов */
    justify-content: space-between;         /* Распределение пространства между элементами */
    align-items: center;                    /* Вертикальное центрирование элементов */
    margin-bottom: 15px;                    /* Отступ снизу от заголовка */
    border-bottom: 1px solid #e9ecef;       /* Нижняя граница для разделения */
    padding-bottom: 10px;                   /* Отступ внутри границы */
}

/* Текст заголовка карточки */
.client-card-header h4 {
    color: #2c3e50;                         /* Темно-синий цвет текста */
    margin: 0;                              /* Убираем стандартные отступы */
    font-weight: 600;                       /* Полужирное начертание для акцента */
    font-size: 1.1rem;                      /* Размер шрифта чуть больше обычного */
}

.client-card-header i {
    color: #27ae60;                         /* Зеленый цвет иконки для позитивного акцента */
    margin-right: 8px;                      /* Отступ справа от иконки */
}

/* Тело карточки клиента */
.client-card-body {
    display: grid;                          /* CSS Grid для точного контроля расположения */
    grid-template-columns: 1fr;             /* Одна колонка для мобильной адаптивности */
    gap: 12px;                              /* Расстояние между строками информации */
}

/* ===== 8. СТРОКИ С ИНФОРМАЦИЕЙ О КЛИЕНТЕ ===== */
.client-info-row {
    display: flex;                          /* Flexbox для горизонтального расположения */
    justify-content: space-between;         /* Метка слева, значение справа */
    align-items: center;                    /* Вертикальное центрирование по центру */
    padding: 8px 0;                         /* Вертикальные отступы для каждой строки */
    border-bottom: 1px dashed #e9ecef;      /* Пунктирная нижняя граница для разделения */
    min-height: 32px;                       /* Минимальная высота для стабильности */
}

/* Последняя строка без границы */
.client-info-row:last-child {
    border-bottom: none;                    /* Убираем границу у последней строки */
}

/* Метка (название поля) */
.client-label {
    color: #7f8c8d;                         /* Серый цвет текста для вторичной информации */
    font-weight: 500;                       /* Средняя толщина шрифта */
    font-size: 0.95em;                      /* Немного уменьшенный размер шрифта */
    flex-shrink: 0;                         /* Запрещаем сжатие метки */
    margin-right: 15px;                     /* Отступ справа от метки */
}

/* Значение поля */
.client-value {
    color: #2c3e50;                         /* Темно-синий цвет текста для основной информации */
    font-weight: 600;                       /* Полужирное начертание для акцента */
    text-align: right;                      /* Выравнивание по правому краю */
    max-width: 70%;                         /* Ограничение ширины для длинных значений */
    word-break: break-word;                 /* Перенос длинных слов по слогам */
    overflow-wrap: break-word;              /* Перенос длинных слов при необходимости */
    flex-grow: 1;                           /* Занимает всё доступное пространство */
    font-style: normal;                     /* КРИТИЧЕСКО ВАЖНО: всегда прямой шрифт, нет курсива! */
}

/* ===== 9. КРИТИЧЕСКОЕ ИСПРАВЛЕНИЕ: СТИЛИ ДЛЯ ПРОЧЕРКА ===== */
/* Убираем все правила с font-style: italic и заменяем только изменением цвета */
#current-client-name:empty {
    color: #95a5a6 !important;              /* Серый цвет для пустого значения */
    font-style: normal !important;          /* КРИТИЧЕСКО ВАЖНО: прямой шрифт, не курсив */
}

/* Стиль для прочерка (значение "—") */
#current-client-name.proschet-no-client {
    color: #95a5a6;                         /* Серый цвет для обозначения отсутствия клиента */
    font-style: normal;                     /* Прямой шрифт, не скачет при переключении */
}

/* Стиль для имени клиента (когда клиент есть) */
#current-client-name.proschet-has-client {
    color: #2c3e50;                         /* Темно-синий цвет для имени клиента */
    font-style: normal;                     /* Прямой шрифт, постоянный */
}

/* Убираем устаревшие и проблемные селекторы */
/* УДАЛЕНО: #current-client-name:contains("-") - не работает в чистом CSS */
/* УДАЛЕНО: .client-value[data-default="true"] - избыточно и вызывает скачки */

/* ===== 10. СТИЛИ ДЛЯ INLINE-РЕДАКТИРОВАНИЯ ===== */
/* Редактируемое имя клиента */
.client-value.editable-client-name {
    cursor: pointer;                        /* Курсор "указатель" при наведении */
    transition: all 0.2s ease;              /* Плавные переходы для всех свойств */
    padding: 4px 8px;                       /* Внутренние отступы для области клика */
    border-radius: 4px;                     /* Скругленные углы для визуального выделения */
    border: 1px solid transparent;          /* Прозрачная рамка для резервирования пространства */
    font-style: normal;                     /* КРИТИЧЕСКО ВАЖНО: всегда прямой шрифт */
}

/* Эффект при наведении на редактируемое имя клиента */
.client-value.editable-client-name:hover {
    background-color: #e3f2fd;              /* Светло-синий фон при наведении */
    color: #2980b9;                         /* Синий цвет текста при наведении */
    border-color: #bbdefb;                  /* Светло-синяя рамка при наведении */
}

/* Выпадающий список для выбора клиента */
.client-inline-select {
    width: 100%;                            /* Полная ширина родительского контейнера */
    padding: 6px 10px;                      /* Внутренние отступы для удобства */
    border: 2px solid #3498db;              /* Синяя рамка для визуального выделения */
    border-radius: 4px;                     /* Скругленные углы */
    background-color: white;                /* Белый фон */
    font-size: 14px;                        /* Стандартный размер шрифта */
    color: #2c3e50;                         /* Темно-синий текст */
    outline: none;                          /* Убираем стандартный outline браузера */
    cursor: pointer;                        /* Курсор "указатель" */
    transition: border-color 0.2s;          /* Плавный переход цвета рамки */
    font-style: normal;                     /* КРИТИЧЕСКО ВАЖНО: прямой шрифт */
}

/* Эффект при фокусе на выпадающем списке */
.client-inline-select:focus {
    border-color: #2980b9;                  /* Темно-синяя рамка при фокусе */
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1); /* Легкая синяя тень при фокусе */
}

/* ===== 11. ДОПОЛНИТЕЛЬНЫЕ СТИЛИ ===== */
/* Состояние загрузки */
.client-inline-loading {
    color: #3498db;                         /* Синий цвет текста при загрузке */
    font-style: normal;                     /* КРИТИЧЕСКО ВАЖНО: прямой шрифт даже при загрузке */
    font-size: 0.95em;                      /* Немного уменьшенный размер шрифта */
}

/* Иконка спиннера в состоянии загрузки */
.client-inline-loading .fa-spinner {
    margin-right: 8px;                      /* Отступ справа от иконки */
    animation: spin 1s linear infinite;     /* Анимация вращения */
}

/* Ключевые кадры анимации вращения */
@keyframes spin {
    0% { transform: rotate(0deg); }         /* Начальное положение */
    100% { transform: rotate(360deg); }     /* Полный оборот */
}

/* ===== 12. АДАПТИВНЫЕ СТИЛИ ДЛЯ МОБИЛЬНЫХ УСТРОЙСТВ ===== */
@media (max-width: 768px) {
    #client-section .section-header {
        flex-wrap: wrap;                    /* Перенос элементов на мобильных */
        padding: 8px 12px;                  /* Уменьшенные отступы на мобильных */
    }
    
    #client-section .section-header h2 {
        font-size: 1.1rem;                  /* Уменьшенный размер шрифта на мобильных */
    }
    
    .current-client-card {
        padding: 15px;                      /* Уменьшенные отступы на мобильных */
    }
    
    .client-info-row {
        flex-direction: column;             /* Вертикальное расположение на мобильных */
        align-items: flex-start;            /* Выравнивание по левому краю */
        gap: 5px;                           /* Расстояние между меткой и значением */
    }
    
    .client-label {
        margin-right: 0;                    /* Убираем отступ справа на мобильных */
        font-size: 0.9em;                   /* Уменьшенный размер шрифта метки */
    }
    
    .client-value {
        text-align: left;                   /* Выравнивание по левому краю на мобильных */
        max-width: 100%;                    /* Полная ширина на мобильных */
        font-size: 1em;                     /* Стандартный размер шрифта значения */
    }
}

/* ===== 13. КЛАССЫ ДЛЯ АНИМАЦИЙ ===== */
/* Анимация появления карточки клиента */
@keyframes fadeInUp {
    from {
        opacity: 0;                         /* Начало: полностью прозрачно */
        transform: translateY(10px);        /* Сдвиг вниз на 10px */
    }
    to {
        opacity: 1;                         /* Конец: полностью непрозрачно */
        transform: translateY(0);           /* Возврат в исходное положение */
    }
}

/* Применение анимации при появлении карточки */
.current-client-card {
    animation: fadeInUp 0.3s ease-out;      /* Анимация появления снизу */
}

/* ===== 14. СТИЛИ ДЛЯ СВЁРНУТОЙ СЕКЦИИ ===== */
#client-section.collapsed .section-body {
    display: none;                          /* Скрываем тело секции при сворачивании */
    padding: 0;                             /* Убираем отступы при скрытии */
    height: 0;                              /* Обнуляем высоту */
    overflow: hidden;                       /* Скрываем переполнение */
}

#client-section.collapsed {
    border-bottom: none;                    /* Убираем нижнюю границу при сворачивании */
}

/* ===== 15. ГАРАНТИРОВАННЫЕ СТИЛИ ДЛЯ КОРРЕКТНОГО ОТОБРАЖЕНИЯ ===== */
/* Гарантируем, что карточка клиента всегда видна при выборе просчёта */
#client-section #client-selection-interface,
#client-section #current-client-display {
    display: block !important;              /* Принудительно показываем элементы */
    visibility: visible !important;         /* Гарантируем видимость */
}

/* Гарантируем, что сообщение "Выберите просчёт" скрыто при активном просчёте */
#client-section.has-proschet #no-proschet-selected {
    display: none !important;               /* Принудительно скрываем */
}

/* Гарантируем, что прочерк всегда серый и прямым шрифтом */
#current-client-name:empty::after {
    content: "—";                           /* Гарантируем прочерк для пустого элемента */
    color: #95a5a6;                         /* Серый цвет для прочерка */
    font-style: normal;                     /* Прямой шрифт, не курсив */
}