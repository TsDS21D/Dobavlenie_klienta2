<!--
index.html –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è sklad
–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è sklad
–î–û–ë–ê–í–õ–ï–ù–û: –ê—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (data-editable)
-->

{% extends "sklad/base.html" %}

<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
{% block title %}–°–∫–ª–∞–¥ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤{% endblock %}

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
{% block content %}
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º -->
    <h1>
        <img src="https://www.bukva-a.ru/uploads/logo/logo300.png" 
            alt="–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è &quot;–ë—É–∫–≤–∞ –ê&quot;" 
            title="–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è &quot;–ë—É–∫–≤–∞ –ê&quot;"
            width="150">
        –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
    </h1>
    
    <!-- –°–∫—Ä—ã—Ç—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π Django -->
    <div class="django-messages" style="display: none;">
        {% if messages %}
            {% for message in messages %}
                <div class="django-message" data-type="{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    </div>
    
    <!-- –î–≤—É—Ö–∫–æ–ª–æ–Ω–æ—á–Ω—ã–π layout -->
    <div class="two-column-layout">
        
        <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –î–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
        <div class="left-column">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ –¥–µ—Ä–µ–≤–∞ -->
            <div class="section-header">
                <h2>
                    <i class="fas fa-folder-tree"></i> –î—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
                </h2>
                <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
                <button type="button" 
                        class="btn-action btn-add-category" 
                        id="add-category-btn">
                    + –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                </button>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
            <div class="tree-container" id="category-tree-container">
                <!-- –î–µ—Ä–µ–≤–æ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
                <div class="tree-loading">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...</p>
                </div>
            </div>
            
        </div>
        
        <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –¢–∞–±–ª–∏—Ü–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ -->
        <div class="right-column">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ -->
            <div class="section-header">
                <h2>
                    <i class="fas fa-box-open"></i> –ú–∞—Ç–µ—Ä–∏–∞–ª—ã
                    {% if selected_category %}
                    <span class="selected-category">
                        {% if descendants_count > 0 %}
                            –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "<strong>{{ selected_category.name }}</strong>" 
                            –∏ {{ descendants_count }} –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏{{ descendants_count|pluralize:"—è—Ö,—è—Ö" }}
                        {% else %}
                            –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "<strong>{{ selected_category.name }}</strong>""
                        {% endif %}
                    </span>
                    {% endif %}
                </h2>
                <div class="header-buttons">
                    <!-- –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–µ) -->
                    {% if selected_category %}
                    <a href="/sklad/" 
                    class="btn-action btn-reset-filter"
                    title="–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –∏ –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã">
                        <i class="fas fa-times-circle"></i> –°–±—Ä–æ—Å–∏—Ç—å
                    </a>
                    {% endif %}
                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
                    <button type="button" 
                            class="btn-action btn-add-material" 
                            id="add-material-btn">
                        + –î–æ–±–∞–≤–∏—Ç—å
                    </button>
                </div>
            </div>
            
           <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
            <div class="form-section" id="material-form-section" style="display: none;">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª</h3>
                
                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
                <form method="post" action="{% url 'sklad:create_material' %}" id="material-form">
                    {% csrf_token %}
                    
                    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
                    <div class="form-group">
                        <label for="material-name">–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞*</label>
                        <input type="text" 
                            id="material-name" 
                            name="name" 
                            class="form-control"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–µ–ª–æ–≤–∫–∞ 130 –≥/–∫–≤.–º, –≥–ª—è–Ω–µ—Ü"
                            required>
                    </div>
                    
                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏ —Ü–µ–Ω–∞ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="material-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è*</label>
                            <select id="material-category" name="category" class="form-control" required>
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é --</option>
                                {% for category in categories %}
                                    <option value="{{ category.id }}" 
                                            {% if selected_category and selected_category.id == category.id %}selected{% endif %}>
                                        {{ category.name }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="material-price">–¶–µ–Ω–∞*</label>
                            <input type="number" 
                                id="material-price" 
                                name="price" 
                                class="form-control"
                                step="0.01" 
                                min="0.01" 
                                placeholder="50.00"
                                required>
                        </div>
                    </div>
                    
                    <!-- –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="material-unit">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è</label>
                            <input type="text" 
                                id="material-unit" 
                                name="unit" 
                                class="form-control"
                                value="–ª–∏—Å—Ç"
                                placeholder="–ª–∏—Å—Ç, —Ä—É–ª–æ–Ω, –º–µ—Ç—Ä">
                        </div>
                        
                        <div class="form-group">
                            <label for="material-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ</label>
                            <input type="number" 
                                id="material-quantity" 
                                name="quantity" 
                                class="form-control"
                                step="0.01" 
                                min="0" 
                                value="0">
                        </div>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∏ —Ñ–æ—Ä–º—ã -->
                    <div class="button-group">
                        <button type="submit" class="btn-submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</button>
                        <button type="button" class="btn-clear" onclick="clearMaterialForm()">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
                    </div>
                </form>
            </div>
            
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö -->
            {% if selected_category and descendants_count > 0 %}
            <div class="categories-info">
                <div class="info-header">
                    <i class="fas fa-info-circle"></i>
                    –ü–æ–∫–∞–∑–∞–Ω—ã –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑:
                </div>
                <div class="categories-list">
                    <div class="main-category">
                        <i class="fas fa-folder"></i>
                        <span class="category-name">{{ selected_category.name }}</span>
                        <span class="category-stats">
                            ({{ selected_category.materials.count }} –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)
                        </span>
                    </div>
                    
                    {% if descendants_count > 0 %}
                    <div class="subcategories-list">
                        <div class="subcategories-header">
                            <i class="fas fa-level-down-alt"></i>
                            –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ({{ descendants_count }}):
                        </div>
                        <div class="subcategories-container">
                            {% for cat in included_categories %}
                                {% if cat.id != selected_category.id %}
                                <div class="subcategory-item">
                                    <i class="fas fa-folder" style="color: #ff9800;"></i>
                                    <span class="subcategory-name">{{ cat.name }}</span>
                                    <span class="subcategory-stats">
                                        ({{ cat.materials.count }} –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)
                                    </span>
                                </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π -->
            <div class="materials-container">
                <div class="materials-section">
                    {% if not materials %}
                        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–µ—Ç -->
                        <div class="empty-message">
                            <i class="fas fa-box-open"></i>
                            {% if selected_category %}
                                –í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "{{ selected_category.name }}" –∏ –µ—ë –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö –Ω–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
                            {% else %}
                                –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å–ª–µ–≤–∞ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.
                            {% endif %}
                        </div>
                    {% else %}
                        <!-- –¢–∞–±–ª–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ -->
                        <div class="materials-table">
                            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã -->
                            <div class="table-header">
                                <div class="col-name">–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞</div>
                                <div class="col-price">–¶–µ–Ω–∞</div>
                                <div class="col-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</div>
                                <div class="col-actions">–î–µ–π—Å—Ç–≤–∏—è</div>
                            </div>
                            
                            <!-- –¢–µ–ª–æ —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π -->
                            <div class="table-body">
                                <!-- –¶–∏–∫–ª –ø–æ –≤—Å–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º -->
                                {% for material in materials %}
                                    <!-- –û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã -->
                                    <div class="table-row" data-material-id="{{ material.id }}">
                                        
                                        <!-- –ö–æ–ª–æ–Ω–∫–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
                                        <div class="col-name">
                                            <!-- 
                                            –î–û–ë–ê–í–õ–ï–ù–ê –í–û–ó–ú–û–ñ–ù–û–°–¢–¨ INLINE-–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø:
                                            - data-editable="true" - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                                            - data-field="name" - —É–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫–æ–µ –ø–æ–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º
                                            - data-original-value - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                                            - ondblclick - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞
                                            -->
                                            <div class="material-name" 
                                                 data-editable="true"
                                                 data-field="name"
                                                 data-material-id="{{ material.id }}"
                                                 data-original-value="{{ material.name }}"
                                                 ondblclick="startInlineEdit(this)">
                                                {{ material.name }}
                                            </div>
                                            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
                                            <div class="material-category">
                                                <i class="fas fa-folder"></i>
                                                {{ material.category.name }}
                                            </div>
                                        </div>
                                        
                                        <!-- –ö–æ–ª–æ–Ω–∫–∞: –¶–µ–Ω–∞ -->
                                        <div class="col-price">
                                            <!-- 
                                            –î–û–ë–ê–í–õ–ï–ù–ê –í–û–ó–ú–û–ñ–ù–û–°–¢–¨ INLINE-–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø:
                                            –î–ª—è —Ü–µ–Ω—ã:
                                            - data-editable="true"
                                            - data-field="price"
                                            - data-original-value —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
                                            -->
                                            <span class="price-badge"
                                                  data-editable="true"
                                                  data-field="price"
                                                  data-material-id="{{ material.id }}"
                                                  data-original-value="{{ material.price }}"
                                                  ondblclick="startInlineEdit(this)">
                                                {{ material.get_price_display }}
                                            </span>
                                        </div>
                                        
                                        <!-- –ö–æ–ª–æ–Ω–∫–∞: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
                                        <div class="col-quantity">
                                            <!-- 
                                            –î–û–ë–ê–í–õ–ï–ù–ê –í–û–ó–ú–û–ñ–ù–û–°–¢–¨ INLINE-–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø:
                                            –î–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:
                                            - data-editable="true"
                                            - data-field="quantity"
                                            - data-min-quantity –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
                                            -->
                                            <span class="quantity-badge {% if material.quantity <= 0 %}quantity-zero{% elif material.quantity <= material.min_quantity %}quantity-low{% endif %}"
                                                  data-editable="true"
                                                  data-field="quantity"
                                                  data-material-id="{{ material.id }}"
                                                  data-original-value="{{ material.quantity }}"
                                                  data-min-quantity="{{ material.min_quantity }}"
                                                  ondblclick="startInlineEdit(this)">
                                                {{ material.quantity }} {{ material.unit }}
                                            </span>
                                        </div>
                                        
                                        <!-- –ö–æ–ª–æ–Ω–∫–∞: –î–µ–π—Å—Ç–≤–∏—è -->
                                        <div class="col-actions">
                                            <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º -->
                                            <button type="button" 
                                                    class="btn-action btn-delete"
                                                    data-material-id="{{ material.id }}"
                                                    data-material-name="{{ material.name }}">
                                                –£–¥–∞–ª–∏—Ç—å
                                            </button>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                        <div class="table-hint">
                            <div class="hint-item">
                                <span class="hint-icon">üìÅ</span>
                                <span class="hint-text">–ü–æ–∫–∞–∑–∞–Ω—ã –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤—Å–µ—Ö –µ—ë –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π</span>
                            </div>
                            <div class="hint-item">
                                <span class="hint-icon">üëÜ</span>
                                <span class="hint-text">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é</span>
                            </div>
                            <!-- –ù–û–í–ê–Ø –ü–û–î–°–ö–ê–ó–ö–ê: inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
                            <div class="hint-item">
                                <span class="hint-icon">‚úèÔ∏è</span>
                                <span class="hint-text">–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Ü–µ–Ω–µ –∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</span>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Å–∫—Ä—ã—Ç–∞—è) -->
    <div class="form-section" id="category-form-section" style="display: none;">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
        
        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <form method="post" action="{% url 'sklad:create_category' %}" id="category-form">
            {% csrf_token %}
            
            <!-- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
            <div class="form-group">
                <label for="category-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏*</label>
                <input type="text" 
                       id="category-name" 
                       name="name" 
                       class="form-control"
                       placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ë—É–º–∞–≥–∞, –ú–µ–ª–æ–≤–∫–∞, –ö–∞—Ä—Ç–æ–Ω"
                       required>
            </div>
            
            <!-- –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è -->
            <div class="form-group">
                <label for="category-parent">–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                <select id="category-parent" name="parent" class="form-control">
                    <option value="">(–ö–æ—Ä–Ω–µ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è)</option>
                    {% for category in categories %}
                        <option value="{{ category.id }}">{{ category.name }}</option>
                    {% endfor %}
                </select>
                <div class="help-text">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —Ñ–æ—Ä–º—ã -->
            <div class="button-group">
                <button type="submit" class="btn-submit">–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
                <button type="button" class="btn-cancel" onclick="hideCategoryForm()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </form>
    </div>
{% endblock %}
