# –§–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Majordomo.ru

## –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

### üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **DEPLOYMENT_MAJORDOMO.md** - –ü–æ–ª–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (14 —à–∞–≥–æ–≤)
- **QUICK_START.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **FILES_FOR_DEPLOYMENT.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª (—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤)
- **replit.md** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è VS Code

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **deploy_settings.py** - Production –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è settings.py
- **nginx_config.conf** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É
- **requirements.txt** - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python

### üîß –°–∫—Ä–∏–ø—Ç—ã
- **start_server.sh** - –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ Daphne —Å–µ—Ä–≤–µ—Ä–∞
- **check_deployment.sh** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Django –ø—Ä–æ–µ–∫—Ç–∞
```
django_app/
‚îú‚îÄ‚îÄ clickcounter/          # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ asgi.py           # ASGI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ settings.py       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ–±–Ω–æ–≤–∏—Ç–µ —Å deploy_settings.py)
‚îÇ   ‚îú‚îÄ‚îÄ urls.py           # URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
‚îú‚îÄ‚îÄ counter/              # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ consumers.py      # WebSocket consumer
‚îÇ   ‚îú‚îÄ‚îÄ models.py         # –ú–æ–¥–µ–ª—å ClickCounter
‚îÇ   ‚îú‚îÄ‚îÄ routing.py        # WebSocket –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ urls.py           # URL –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ views.py          # Views
‚îÇ   ‚îú‚îÄ‚îÄ migrations/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îÇ       ‚îî‚îÄ‚îÄ counter/
‚îÇ           ‚îî‚îÄ‚îÄ index.html # HTML —à–∞–±–ª–æ–Ω
‚îú‚îÄ‚îÄ manage.py             # Django management
‚îú‚îÄ‚îÄ requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .gitignore           # Git ignore —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ db.sqlite3           # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ Git
```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
git add .
git commit -m "Prepare for deployment"
git push origin main

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Majordomo
ssh u35459@beauty-print.ru
cd ~
git clone https://github.com/–≤–∞—à-username/–ø—Ä–æ–µ–∫—Ç.git django_app
cd django_app
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ SCP
```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∏–∑ –ø–∞–ø–∫–∏ —Å –ø—Ä–æ–µ–∫—Ç–æ–º
scp -r * u35459@beauty-print.ru:~/django_app/

# –ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
scp requirements.txt u35459@beauty-print.ru:~/django_app/
scp start_server.sh u35459@beauty-print.ru:~/django_app/
# –∏ —Ç.–¥.
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤—Ä—É—á–Ω—É—é
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh u35459@beauty-print.ru
cd ~/django_app

# –°–æ–∑–¥–∞–π—Ç–µ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª —á–µ—Ä–µ–∑ nano –∏–ª–∏ vim
nano requirements.txt
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+O, Enter, Ctrl+X)
```

## –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

1. ‚úÖ –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ **DEPLOYMENT_MAJORDOMO.md**
2. ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. ‚úÖ –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **check_deployment.sh** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
5. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ **start_server.sh**
6. ‚úÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ **nginx_config.conf** –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

## –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

### settings.py
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç–µ:
```python
SECRET_KEY = '–Ω–æ–≤—ã–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á'  # –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π!
DEBUG = False
ALLOWED_HOSTS = ['beauty-print.ru', 'www.beauty-print.ru']
CHANNEL_LAYERS = {
    'default': {
        'BACKEND': 'channels_redis.core.RedisChannelLayer',
        'CONFIG': {
            "hosts": [('unix:///home/u35459/redis.socket', 0)],
        },
    },
}
```

### start_server.sh
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏:
```bash
cd /home/u35459/django_app  # –í–∞—à –ø—É—Ç—å
source venv/bin/activate
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f daphne.log`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É: `bash check_deployment.sh`
3. –ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Majordomo: support@majordomo.ru

## –í—Å–µ –≥–æ—Ç–æ–≤–æ! üöÄ

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ DEPLOYMENT_MAJORDOMO.md –∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ beauty-print.ru
